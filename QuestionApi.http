# @HostAddress = https://qbank.yuxiaoyu.top/api
@HostAddress = https://localhost:7224
@email = admin@qq.com
@badPassword = password
@password = Az.123123!

# 注册用户
POST {{HostAddress}}/register
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}

###

# 使用密码登录获取Token
POST {{HostAddress}}/login?useCookies=false
Content-Type: application/json

{
  "email": "{{email}}",
  "password": "{{password}}"
}

###

# Token
@accessToken = CfDJ8AfsKNinfjRPgNkrR0o_RlAC56NgMipb3Cn6m-dP02jdeKVucT-0iE-lEvI9oNLt3ms8snhPXDL4I3Wzh2D5LkuMkAFfaBrDS-1LV64DzqkNq2fzkHjlI7RGoTSH-0Kxkrux5ai3M6wX5dM2fNhFvFAxT_cDMKFUFF5WdN1K4wJk3NVJ14sfR0o9jQz9uEEnFffbUcNUl8YUsC8ddraqkFxCzA6dj7u_v7RG8YdQ1rIrwSmM548LjNtTZg8gMWmAuBM3EJOBPgWRHRIvoglTSP6XeWnirzE-3pXcmOhxPBaweLMMhndB3AB2KswVTyRH1q3xp7IK1Xd0ZoaAPJbIzUkbNz4Bd4Z2EdtDhxxqRtvFrdI1CpsZHmw07UkilzcvOFTOgn2SdMuhuXGfzn1GdrSKZwwcuuAbeAT_X1cf54fSvC9qQrHRuRN6WnEHOu-AM9CVLzrj-5bPS5WjPt9X04oxYAEetLeHoMpDeGMitq_w9qkFbzLs6uRSyYOmnhNzy65UXaGsDV7hYxoadvWFsadXgtrHzJKuQPs7JivcxReeTE9jIpMNUjrT_gCeKV0qukQBj9lDANUTym-joU6wvJCVsJJtP0lcwqXwVUBHPcWm9RbZmcTwEG_1l3-1zAIZjQ
@refreshToken = CfDJ8AfsKNinfjRPgNkrR0o_RlD3qaMRJvORTqDV4arT_HFWaRRnDv_dIgdScvb-RYB74CbzFyKSdF1cORqS4KqN9Q0W2t7tHe0Zzp7SkC6n0s_WRosmZsc6cjaNWzbyfOeqgNhW6e8hHPj3NN0HD01oxmUcC7PhvPVdCk9DMR-eSSZ949AybMufVPeQE53L32oSq442Wppu-Q6uI_8KPY5qPix05s-eu-64UneS3fmCRyDf4aAD-tlYWyjLfGgOVpur3p515iwf4TFv61T8g1byDJdbtLvX-dbXiJV_8k7pV4bxMMWmG2uUFIMt1EaOCmZBWeoxACKrgotKvpiqQu0C4aaugYPhDacBPosU5MrZxyDKEb9TR-0KF5XnrVa8yJP4pyT-WW8i9LpD_2mdWN13BzMQfWFIMBenTTqJt4JhLzVIv2zeWNtWCIJsaLYQjRByyJCOvbzxXj7bkJ51PXqDo1k11eVN0Ns0sE--esTdQRqQZboY04QUmm1rMmlcp9UZB74t9mzwQQRRrvW5rTBqBthKa-_n_KH2FmkvHu1vbjSlU-1LwApfyyprAYUQkwYZv3JpCw4rYTt1t7Tlsa1F2ed0PBZcbjnZgwfJ54C0a5f67gy4ka0QU-XI2LjdsFnmbQ

###

# 刷新Token
POST {{HostAddress}}/refresh
Content-Type: application/json

{
  "refreshToken": "{{refreshToken}}"
}

### 用户接口

# 获取用户总数
GET {{HostAddress}}/users/count HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 获取用户列表
GET {{HostAddress}}/users/ HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 根据ID获取用户
GET {{HostAddress}}/users/b23f7e0a-3a76-4f0a-b51f-da03680eaa9d/ HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 修改用户
PUT {{HostAddress}}/users/b23f7e0a-3a76-4f0a-b51f-da03680eaa9d/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "userName": "student",
  "Roles": ["student"]
}

###

# 获取题目总数(一般用于分页)
GET {{HostAddress}}/Questions/count
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 获取题目列表
GET {{HostAddress}}/Questions/?offset=0&limit=100
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 根据题目ID获取题目
GET {{HostAddress}}/Questions/22
Authorization: Bearer {{accessToken}}
Accept: application/json


###

# 创建单选题目
POST {{HostAddress}}/Questions/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "QuestionText": "测试题目？",
  "QuestionType": 1,
  "DifficultyLevel": 1,
  "CorrectAnswer": "D",
  "Options": [
    {
      "OptionCode": "A",
      "OptionText": "方法论1",
      "IsCorrect": false
    },
    {
      "OptionCode": "B",
      "OptionText": "方法论2",
      "IsCorrect": false
    },
    {
      "OptionCode": "C",
      "OptionText": "方法论3",
      "IsCorrect": false
    },
    {
      "OptionCode": "D",
      "OptionText": "方法论4",
      "IsCorrect": true
    }
  ]
}

###

# 创建多选题目
POST {{HostAddress}}/Questions/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "QuestionText": "多选题，题目？",
  "QuestionType": 2,
  "DifficultyLevel": 1,
  "CorrectAnswer": "A,C,D",
  "Options": [
    {
      "OptionCode": "A",
      "OptionText": "方法论1",
      "IsCorrect": true
    },
    {
      "OptionCode": "B",
      "OptionText": "方法论2",
      "IsCorrect": false
    },
    {
      "OptionCode": "C",
      "OptionText": "方法论3",
      "IsCorrect": true
    },
    {
      "OptionCode": "D",
      "OptionText": "方法论4",
      "IsCorrect": true
    }
  ]
}

###

# 创建判断题目
POST {{HostAddress}}/Questions/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "QuestionText": "判断题，题目？",
  "QuestionType": 3,
  "DifficultyLevel": 1,
  "CorrectAnswer": "1"
}

###

# 创建填空题目
POST {{HostAddress}}/Questions/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "QuestionText": "填空题？",
  "QuestionType": 4,
  "DifficultyLevel": 1,
  "CorrectAnswer": "喔哦喔哦我啊啊啊"
}

###

# 修改题目
PUT {{HostAddress}}/Questions/22
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "CorrectAnswer": "D"
}

###

# 删除题目
DELETE  {{HostAddress}}/Questions/32
Authorization: Bearer {{accessToken}}
Content-Type: application/json

###


### 试卷相关API

# 查询试卷列表
GET {{HostAddress}}/Exams/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

###

# 根据ID查询试卷
GET {{HostAddress}}/Exams/4
Authorization: Bearer {{accessToken}}
Content-Type: application/json

###

# 创建试卷
POST {{HostAddress}}/Exams/
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ExamName": "第一套试卷",
  "DifficultyLevel": 2,
  "ExamQuestions": [
    {
      "Order": 1,
      "QuestionId": 22
    },
    {
      "Order": 2,
      "QuestionId": 23
    },
    {
      "Order": 3,
      "QuestionId": 27
    },
    {
      "Order": 4,
      "QuestionId": 30
    }
  ]
}

###

# 修改试卷
PUT  {{HostAddress}}/Exams/4
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ExamName": "第一套试卷",
  "DifficultyLevel": 3,
  "ExamQuestions": [
    {
      "Order": 1,
      "QuestionId": 22
    },
    {
      "Order": 2,
      "QuestionId": 23
    },
    {
      "Order": 3,
      "QuestionId": 27
    },
    {
      "Order": 4,
      "QuestionId": 30
    },
    {
      "Order": 5,
      "QuestionId": 34
    },
    {
      "Order": 6,
      "QuestionId": 35
    }
  ]
}

###

# 创建考试
POST {{HostAddress}}/examination HTTP/1.1
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ExaminationName": "六级考试",
  "ExaminationType": 1,
  "DifficultyLevel": 1,
  "ExamPaperId": 4,
  "DurationSeconds": 1800
}

###

# 获取考试
GET {{HostAddress}}/examination/1 HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 获取考试列表
GET {{HostAddress}}/examination/ HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 修改考试
PUT {{HostAddress}}/examination/1 HTTP/1.1
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ExaminationName": "六级考试xxxxxxx",
  "DurationSeconds": 600
}

###

# 删除考试
DELETE {{HostAddress}}/examination/16 HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###

# 获取交卷
GET {{HostAddress}}/students/me/submit-examination/15/ HTTP/1.1
Authorization: Bearer {{accessToken}}
Content-Type: application/json

###

# 交卷和批改
POST {{HostAddress}}/students/me/submit-examination/15/ HTTP/1.1
Authorization: Bearer {{accessToken}}
Content-Type: application/json

[
  {
  "QuestionId": "22",
  "AnswerText": "A"
  },
  {
  "QuestionId": "23",
  "AnswerText": "ABCD"
  },
  {
  "QuestionId": "27",
  "AnswerText": "0"
  },
  {
  "QuestionId": "30",
  "AnswerText": "  喔哦喔哦我23啊5  "
  }
]

###

# 获取当前学生的答题记录
GET {{HostAddress}}/students/me/answer-history HTTP/1.1
Authorization: Bearer {{accessToken}}
Accept: application/json

###